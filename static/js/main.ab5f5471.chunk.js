(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(79)},46:function(e,t,a){},73:function(e,t){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(39),o=a.n(i),r=(a(46),a(5)),c=a(6),l=a(8),h=a(7),u=a(9),p=a(82),m=a(84),d=a(83),g=a(81),b=a(1),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={createName:"",createPassword:"",manageName:"",managePassword:""},a.updateCreateName=a.updateCreateName.bind(Object(b.a)(Object(b.a)(a))),a.updateCreatePassword=a.updateCreatePassword.bind(Object(b.a)(Object(b.a)(a))),a.updateManageName=a.updateManageName.bind(Object(b.a)(Object(b.a)(a))),a.updateManagePassword=a.updateManagePassword.bind(Object(b.a)(Object(b.a)(a))),a.createTourney=a.createTourney.bind(Object(b.a)(Object(b.a)(a))),a.manageTourney=a.manageTourney.bind(Object(b.a)(Object(b.a)(a))),a.manageEnter=a.manageEnter.bind(Object(b.a)(Object(b.a)(a))),a.createEnter=a.createEnter.bind(Object(b.a)(Object(b.a)(a))),e.socket.on("tourney",function(t){e.history.push("/tourneymap/tourney/"+t)}),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateCreateName",value:function(e){this.setState({createName:e.target.value}),console.log(this.state)}},{key:"updateCreatePassword",value:function(e){this.setState({createPassword:e.target.value}),console.log(this.state)}},{key:"updateManageName",value:function(e){this.setState({manageName:e.target.value}),console.log(this.state)}},{key:"updateManagePassword",value:function(e){this.setState({managePassword:e.target.value}),console.log(this.state)}},{key:"createTourney",value:function(){""===this.state.createName||""===this.state.createPassword?alert("Fill in all fields!"):this.props.socket.emit("create tourney",{name:this.state.createName,password:this.state.createPassword})}},{key:"manageTourney",value:function(){""===this.state.manageName||""===this.state.managePassword?alert("Fill in all fields!"):this.props.socket.emit("manage tourney",{name:this.state.manageName,password:this.state.managePassword})}},{key:"manageEnter",value:function(e){"Enter"==e.key&&this.manageTourney()}},{key:"createEnter",value:function(e){"Enter"==e.key&&this.createTourney()}},{key:"render",value:function(){return s.a.createElement("div",{className:"home"},s.a.createElement("div",{className:"home-box"},s.a.createElement("p",{className:"home-title"},"Tourney Map"),s.a.createElement("div",{className:"home-create"},s.a.createElement("p",{className:"home-text"},"Name:"),s.a.createElement("input",{className:"home-input",type:"text",onInput:this.updateCreateName}),s.a.createElement("p",{className:"home-text"},"Password:"),s.a.createElement("input",{className:"home-input",type:"password",onInput:this.updateCreatePassword,onKeyPress:this.createEnter}),s.a.createElement("button",{className:"home-create-button",onClick:this.createTourney}," Create Tourney ")),s.a.createElement("div",{className:"home-manage"},s.a.createElement("p",{className:"home-text"},"Name:"),s.a.createElement("input",{className:"home-input",type:"text",onInput:this.updateManageName}),s.a.createElement("p",{className:"home-text"},"Password:"),s.a.createElement("input",{className:"home-input",type:"password",onInput:this.updateManagePassword,onKeyPress:this.manageEnter}),s.a.createElement("button",{className:"home-manage-button",onClick:this.manageTourney}," Manage Tourney "))))}}]),t}(s.a.Component),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={input:"",messages:[]},e.socket.on("receive message",function(e){if(this.mounted){var t=this.state.messages.slice();t.unshift(e.message),t.length>8&&t.pop(),this.setState({messages:t})}}.bind(Object(b.a)(Object(b.a)(a)))),a.getInfo=a.getInfo.bind(Object(b.a)(Object(b.a)(a))),a.typeChange=a.typeChange.bind(Object(b.a)(Object(b.a)(a))),a.titleChange=a.titleChange.bind(Object(b.a)(Object(b.a)(a))),a.infoChange=a.infoChange.bind(Object(b.a)(Object(b.a)(a))),a.highlightChange=a.highlightChange.bind(Object(b.a)(Object(b.a)(a))),a.getMessages=a.getMessages.bind(Object(b.a)(Object(b.a)(a))),a.handleKey=a.handleKey.bind(Object(b.a)(Object(b.a)(a))),a.handleInput=a.handleInput.bind(Object(b.a)(Object(b.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"titleChange",value:function(e){this.props.updateTile(this.props.row,this.props.col,this.props.type,e.target.value,this.props.info,this.props.highlight)}},{key:"typeChange",value:function(e){this.props.updateTile(this.props.row,this.props.col,e.target.value,this.props.title,"",this.props.highlight)}},{key:"infoChange",value:function(e){this.props.updateTile(this.props.row,this.props.col,this.props.type,this.props.title,e.target.value,this.props.highlight)}},{key:"highlightChange",value:function(e){this.props.updateTile(this.props.row,this.props.col,this.props.type,this.props.title,this.props.info,e.target.value)}},{key:"getInfo",value:function(){if("text"===this.props.type)return s.a.createElement("div",null,s.a.createElement("p",{className:"menu-text"},"Info:"),s.a.createElement("input",{type:"text",value:this.props.info,onChange:this.infoChange}))}},{key:"getMessages",value:function(){for(var e=[],t=this.state.messages.length-1;t>=0;t--)e.push(s.a.createElement("hr",{className:"chat-line",key:-t-1})),e.push(s.a.createElement("li",{className:"chat-text",key:t},this.state.messages[t]));return[].push(s.a.createElement("ul",null,e)),e}},{key:"handleKey",value:function(e){"Enter"==e.key&&""!=this.state.input&&(this.props.socket.emit("send message",{name:this.props.name,message:this.state.input}),this.setState({input:""}))}},{key:"handleInput",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"tourney-menu"},s.a.createElement("div",{className:"tourney-name"},this.props.name),s.a.createElement("div",null,s.a.createElement("p",{className:"menu-text"},"Type:"),s.a.createElement("select",{value:this.props.type,onChange:this.typeChange},s.a.createElement("option",{value:""},"Blank"),s.a.createElement("option",{value:"text"},"Text"),s.a.createElement("option",{value:"timer"},"Timer"))),s.a.createElement("div",null,s.a.createElement("p",{className:"menu-text"},"Title:"),s.a.createElement("input",{type:"text",value:this.props.title,onChange:this.titleChange})),s.a.createElement("div",null,this.getInfo()),s.a.createElement("div",null,s.a.createElement("p",{className:"menu-text"},"Highlight:"),s.a.createElement("select",{value:this.props.highlight,onChange:this.highlightChange},s.a.createElement("option",{value:""},"None"),s.a.createElement("option",{value:"red"},"Red"),s.a.createElement("option",{value:"green"},"Green"),s.a.createElement("option",{value:"blue"},"Blue"),s.a.createElement("option",{value:"yellow"},"Yellow"),s.a.createElement("option",{value:"orange"},"Orange"))),s.a.createElement("div",{className:"chat-box"},s.a.createElement("div",null,this.getMessages()),s.a.createElement("div",null,s.a.createElement("p",{className:"menu-text"},"Chat:"),s.a.createElement("input",{type:"text",value:this.state.input,onChange:this.handleInput,onKeyPress:this.handleKey}))))}}]),t}(s.a.Component),f=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).row=e.row,a.col=e.col,a.handleClick=e.click,a.handleDrop=e.drop,a.handleDrag=a.handleDrag.bind(Object(b.a)(Object(b.a)(a))),a.handleDragOver=a.handleDragOver.bind(Object(b.a)(Object(b.a)(a))),a.getStyle=a.getStyle.bind(Object(b.a)(Object(b.a)(a))),a.getInfo=a.getInfo.bind(Object(b.a)(Object(b.a)(a))),a.toggleTimer=a.toggleTimer.bind(Object(b.a)(Object(b.a)(a))),a.resetTimer=a.resetTimer.bind(Object(b.a)(Object(b.a)(a))),a.getTime=a.getTime.bind(Object(b.a)(Object(b.a)(a))),a.checkID=a.checkID.bind(Object(b.a)(Object(b.a)(a))),a.state={time:0},e.socket.on("update timer",function(t){var a=""+this.row+e.name+this.col;console.log(a),console.log(t.key),a===t.key&&(console.log("gotem"),this.setState({time:t.time}))}.bind(Object(b.a)(Object(b.a)(a)))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleDrag",value:function(e){e.dataTransfer.setData("row",e.target.getAttribute("data-row")),e.dataTransfer.setData("col",e.target.getAttribute("data-col"))}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"getStyle",value:function(){return"red"===this.props.highlight?{backgroundColor:"#f44242"}:"green"===this.props.highlight?{backgroundColor:"#42f442"}:"blue"===this.props.highlight?{backgroundColor:"#427cf4"}:"yellow"===this.props.highlight?{backgroundColor:"#f4f442"}:"orange"===this.props.highlight?{backgroundColor:"#f47a42"}:void 0}},{key:"toggleTimer",value:function(){this.props.socket.emit("toggle timer",{name:this.props.name,row:this.row,col:this.col})}},{key:"resetTimer",value:function(){this.props.socket.emit("reset timer",{name:this.props.name,row:this.row,col:this.col})}},{key:"getTime",value:function(){var e=Math.floor(this.state.time/60),t=this.state.time%60,a="";return t<10&&(a=0),e+":"+a+t}},{key:"getInfo",value:function(){return"timer"===this.props.type?s.a.createElement("div",{"data-row":this.row,"data-col":this.col},this.getTime(),s.a.createElement("div",null,s.a.createElement("button",{"data-row":this.row,"data-col":this.col,className:"timer-button",type:"button",onClick:this.toggleTimer},"S/P"),s.a.createElement("button",{"data-row":this.row,"data-col":this.col,className:"timer-button",type:"button",onClick:this.resetTimer},"R"))):this.props.info}},{key:"checkID",value:function(){return this.row==this.props.crow&&this.col==this.props.ccol?"selected":""}},{key:"render",value:function(){return s.a.createElement("div",{onClick:this.handleClick,"data-row":this.row,"data-col":this.col,draggable:"true",onDragOver:this.handleDragOver,onDragStart:this.handleDrag,onDrop:this.handleDrop,className:"grid-tile",id:this.checkID(),style:this.getStyle()},s.a.createElement("div",{className:"tile-title","data-row":this.row,"data-col":this.col},this.props.title),s.a.createElement("div",{"data-row":this.row,"data-col":this.col},this.getInfo()))}}]),t}(s.a.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).createRow=a.createRow.bind(Object(b.a)(Object(b.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createRow",value:function(){for(var e=[],t=this.props.row,a=this.props.map,n=0;n<18;n++)e.push(s.a.createElement(f,{key:n,crow:this.props.crow,ccol:this.props.ccol,name:this.props.name,socket:this.props.socket,row:t,col:n,type:a[t][n][0],title:a[t][n][1],info:a[t][n][2],highlight:a[t][n][3],click:this.props.handleClick,drop:this.props.handleDrop}));return e}},{key:"render",value:function(){return s.a.createElement("div",{className:"grid-row"},this.createRow())}}]),t}(s.a.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).map=e.map,a.createRows=a.createRows.bind(Object(b.a)(Object(b.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createRows",value:function(){for(var e=[],t=0;t<10;t++)e.push(s.a.createElement(O,{key:t,crow:this.props.crow,ccol:this.props.ccol,name:this.props.name,socket:this.props.socket,handleClick:this.props.handleClick,handleDrop:this.props.handleDrop,map:this.props.map,row:t}));return e}},{key:"render",value:function(){return s.a.createElement("div",{className:"tourney-display"},s.a.createElement("div",{className:"tourney-grid"},this.createRows()))}}]),t}(s.a.Component),k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).id=atob(e.id),a.updateMap=a.updateMap.bind(Object(b.a)(Object(b.a)(a))),a.updateTile=a.updateTile.bind(Object(b.a)(Object(b.a)(a))),a.handleDrop=a.handleDrop.bind(Object(b.a)(Object(b.a)(a))),a.handleClick=a.handleClick.bind(Object(b.a)(Object(b.a)(a))),a.state={map:new Array(10).fill(new Array(18).fill(["","","",""])),menu:["","","",""],row:0,col:0},e.socket.emit("get tourney",{name:a.id}),e.socket.on("load tourney",function(e){this.mounted&&(console.log(e),this.updateMap(e.map))}.bind(Object(b.a)(Object(b.a)(a)))),e.socket.on("update tourney",function(e){this.mounted&&(console.log(e),this.updateMap(e.map))}.bind(Object(b.a)(Object(b.a)(a)))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"updateMap",value:function(e){this.setState({map:e})}},{key:"updateTile",value:function(e,t,a,n,s,i){var o=this.state.map.slice();o[e][t]=[a,n,s,i],this.setState({map:o,menu:o[e][t]}),this.props.socket.emit("map tile",{id:this.id,row:e,col:t,type:a,title:n,info:s,highlight:i})}},{key:"handleDrop",value:function(e){e.preventDefault();var t=parseInt(e.dataTransfer.getData("row")),a=parseInt(e.dataTransfer.getData("col")),n=e.target.getAttribute("data-row"),s=e.target.getAttribute("data-col"),i=this.state.map[t][a],o=this.state.map.slice();o[t][a]=o[n][s],o[n][s]=i,this.updateMap(o);var r=this.state.map[n][s];this.setState({map:o,menu:r,row:n,col:s}),console.log("switched!"),this.props.socket.emit("map switch",{id:this.id,a:t,b:a,c:n,d:s})}},{key:"handleClick",value:function(e){var t=e.target.getAttribute("data-row"),a=e.target.getAttribute("data-col");if(null!=t&&null!=a){var n=this.state.map[t][a];this.setState({menu:n,row:t,col:a})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"tourney"},s.a.createElement(v,{name:this.id,type:this.state.menu[0],socket:this.props.socket,title:this.state.menu[1],info:this.state.menu[2],highlight:this.state.menu[3],row:this.state.row,col:this.state.col,updateTile:this.updateTile}),s.a.createElement("div",null,s.a.createElement(j,{crow:this.state.row,ccol:this.state.col,name:this.id,socket:this.props.socket,map:this.state.map,handleDrop:this.handleDrop,handleClick:this.handleClick})))}}]),t}(s.a.Component),w=a(40),E=a.n(w)()("localhost:5000");E.on("warning",function(e){alert(e)});var C=function(e){var t=e.history;return s.a.createElement(y,{history:t,socket:E})},N=function(e){var t=e.match;return s.a.createElement(k,{id:t.params.id,socket:E})},T=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(p.a,null,s.a.createElement("div",null,s.a.createElement(m.a,null,s.a.createElement(d.a,{path:"/tourneymap/home",component:C}),s.a.createElement(d.a,{path:"/tourneymap/tourney/:id",component:N}),s.a.createElement(g.a,{to:"/tourneymap/home"}))))}}]),t}(n.Component);o.a.render(s.a.createElement(T,null),document.getElementById("root"))}},[[41,2,1]]]);
//# sourceMappingURL=main.ab5f5471.chunk.js.map